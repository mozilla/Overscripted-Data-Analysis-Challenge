/*! aipai-h5-sdk 2018-04-09 11:30:50 AM */
var _hmt=_hmt||[];!function(){function init(){Apwebstat.webPageViewTrace(),Apwebstat.loadBaiduSDK()}var logHost="mlog.aipai.com",cookieHost=".aipai.com",localHost=window.location.host;if(localHost){var hostIndex=localHost.indexOf("lieyou.com");hostIndex>=0&&(logHost="mlog.lieyou.com",cookieHost=".lieyou.com")}var PAGE_TYPE="other",ADV_IFRAME_PAGE_TYPE="mlog_ati",errRetryTime=6,errTime=0,sentTimeout=3e3,prefix_domain="file:"===location.protocol?"http:":"",apdomain=prefix_domain+"//"+logHost,apip="//219.135.99.167",webGif="/g.gif",appGif="/i.gif",redirectGif="/r.gif",domainUrl=apdomain+webGif,appdomainUrl=apdomain+appGif,ipUrl=apip+webGif,redirectDomainUrl=apdomain+redirectGif,redirectIpUrl=apip+redirectGif,errorReportUrl="//"+logHost+"/e.gif";try{ap_mlog_track&&(PAGE_TYPE=ap_mlog_page)}catch(e){}var Apwebstat={},util={},sdk={};!function(global){var JSON=JSON||{};JSON.stringify=JSON.stringify||function(a){var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a='"'+a+'"'),String(a);var c,d,e=[],f=a&&a.constructor==Array;for(c in a)d=a[c],b=typeof d,"string"==b?d='"'+d+'"':"object"==b&&null!==d&&(d=JSON.stringify(d)),e.push((f?"":'"'+c+'":')+String(d));return(f?"[":"{")+String(e)+(f?"]":"}")},JSON.parse=JSON.parse||function(str){return""===str&&(str='""'),eval("var p="+str+";"),p},global.JSON=JSON}(util),function(a){"use strict";var b,c=a.Base64,d="2.2.0";if("undefined"!=typeof module&&module.exports)try{b=require("buffer").Buffer}catch(y){}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=function(a){for(var b={},c=0,d=a.length;c<d;c++)b[a.charAt(c)]=c;return b}(e),g=String.fromCharCode,h=function(a){if(a.length<2){var b=a.charCodeAt(0);return b<128?a:b<2048?g(192|b>>>6)+g(128|63&b):g(224|b>>>12&15)+g(128|b>>>6&63)+g(128|63&b)}var b=65536+1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320);return g(240|b>>>18&7)+g(128|b>>>12&63)+g(128|b>>>6&63)+g(128|63&b)},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,j=function(a){return a.replace(i,h)},k=function(a){var b=[0,2,1][a.length%3],c=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0);return[e.charAt(c>>>18),e.charAt(c>>>12&63),b>=2?"=":e.charAt(c>>>6&63),b>=1?"=":e.charAt(63&c)].join("")},l=a.btoa?function(b){return a.btoa(b)}:function(a){return a.replace(/[\s\S]{1,3}/g,k)},m=b?function(a){return(a.constructor===b.constructor?a:new b(a)).toString("base64")}:function(a){return l(j(a))},n=function(a,b){return b?m(String(a)).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}).replace(/=/g,""):m(String(a))},o=function(a){return n(a,!0)},p=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),q=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),c=b-65536;return g(55296+(c>>>10))+g(56320+(1023&c));case 3:return g((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return g((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},r=function(a){return a.replace(p,q)},s=function(a){var b=a.length,c=b%4,d=(b>0?f[a.charAt(0)]<<18:0)|(b>1?f[a.charAt(1)]<<12:0)|(b>2?f[a.charAt(2)]<<6:0)|(b>3?f[a.charAt(3)]:0),e=[g(d>>>16),g(d>>>8&255),g(255&d)];return e.length-=[0,0,2,1][c],e.join("")},t=a.atob?function(b){return a.atob(b)}:function(a){return a.replace(/[\s\S]{1,4}/g,s)},u=b?function(a){return(a.constructor===b.constructor?a:new b(a,"base64")).toString()}:function(a){return r(t(a))},v=function(a){return u(String(a).replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(){var b=a.Base64;return a.Base64=c,b};if(a.Base64={VERSION:d,atob:t,btoa:l,fromBase64:v,toBase64:n,utob:j,encode:n,encodeURI:o,btou:r,decode:v,noConflict:w},"function"==typeof Object.defineProperty){var x=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return v(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(a){return n(this,a)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return n(this,!0)}))}}a.Meteor&&(Base64=a.Base64)}(util),String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},util.encode=function(a){return util.Base64.encodeURI(a)},util.stringify=function(a){return util.JSON.stringify(a)};var unencodeParams={appkey:0,cookieId:0};util.toKVString=function(a){if(void 0!=a&&"object"==typeof a){var b="";for(var c in a){var d=a[c];d=void 0==unencodeParams[c]||0!=unencodeParams[c]?util.encode(a[c]):a[c],b+=c+"="+d+"&"}return b.substring(0,b.length-1)}return""},util.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)})},util.getCookie=function(a){var b=void 0;if(document.cookie&&""!=document.cookie)for(var c=document.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].trim();if(e.substring(0,a.length+1)==a+"="){b=decodeURIComponent(e.substring(a.length+1));break}}return b},util.setCookie=function(a,b,c,d,e,f){var g=new Date;g.setTime(g.getTime()),c&&(c=1e3*c*60*60*24);var h=new Date(g.getTime()+c);document.cookie=a+"="+escape(b)+(c?";expires="+h.toGMTString():"")+(d?";path="+d:"")+(e?";domain="+e:"")+(f?";secure":"")},util.removeCookie=function(a,b,c,d,e){var f=new Date;f.setTime(f.getTime());var g=new Date(f.getTime()-1e3);document.cookie=a+"="+escape(b)+";expires="+g.toGMTString()+(c?";path="+c:"")+(d?";domain="+d:"")+(e?";secure":"")},util.isIP=function(a){return!!a&&(!!/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g.test(a)&&(RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256||void 0))},sdk.errorReport=function(a,b){var c=new Image(1,1);c.src=errorReportUrl+"?"+window.location.href+"|"+a+"|"+b+"|"+navigator.userAgent,c.onload=function(){}},sdk.retryHandler=function(a,b,c){if(++errTime>=errRetryTime)return void sdk.errorReport("retry 10 time",b);errTime>=errRetryTime-3&&(a=ipUrl),setTimeout(function(){sdk.send(a,b,c)},500*errTime)},sdk.send=function(a,b,c){var d=a+"?"+b;try{var e=new Image(1,1);e.src=d,e.onload=function(){},e.onerror=function(){sdk.retryHandler(a,b,c)}}catch(e){sdk.retryHandler(a,b,c)}},sdk.stat=function(a){sdk.send(domainUrl,a,"post")},sdk.redirectRetryHandler=function(a,b,c,d){if(++errTime>=errRetryTime)return void sdk.errorReport("retry 4 time",b);errTime==errRetryTime-1&&(a=redirectIpUrl),setTimeout(function(){sdk.redirectStat(a,b,c,d)},500*errTime)},sdk.redirectStat=function(a,b,c,d){var e=a+"?"+b;try{void 0!=d&&1==d?window.open(e):window.location.href=e}catch(e){sdk.redirectRetryHandler(a,b,c,d)}};var oldCookieIdKey="aipai_ui",newCookieIdKey="apbd",cookieId=util.getCookie(newCookieIdKey);if(!cookieId){var oldCookieId=util.getCookie(oldCookieIdKey);cookieId=oldCookieId||util.generateUUID(),util.setCookie(newCookieIdKey,cookieId,726,"/")}var bid=util.getCookie("b");void 0==bid&&(bid=0),sdk.getHdrData=function(){function a(a){var b=/(\w+):\/\/([\w.]+)\/(\S*)/,c=a.match(b);if(null!=c){var d=(c[0],c[1],c[2]),e=document.referrer;return"localhost"!=d&&{host:d,path:e}}return!1}var b=document.referrer,c="0",d=0==b.length?"0":b;"undefined"==d&&(d=0);var e=String(window.location.href),f=(a(e).host&&a(e).host,"0");f=Math.ceil(window.screen.width)>Math.ceil(window.screen.height)?Math.ceil(window.screen.width)+"."+Math.ceil(window.screen.height):Math.ceil(window.screen.height)+"."+Math.ceil(window.screen.width);var g={hostname:location.hostname,pathname:location.href,protocol:location.protocol,screenSize:f,flashVersion:1,silverlight:1,refferHost:c,refferPath:d,cookieId:cookieId,appkey:"6f6bb7dfbf1a4582b472b2b3e68b7208",bid:bid};return util.toKVString(g)};var hdrPbBuf=sdk.getHdrData();sdk.generateSendData=function(a){var b=hdrPbBuf;if(""==b)return void sdk.errorReport("hdr",b+"&&"+a);var c=util.generateUUID(),d=(new Date).getTime(),e="logid="+c+"&v=1&clitime="+d+"&"+b;return void 0!=a&&a.length>0&&(e=e+"&"+a),e},Apwebstat.webPageViewTrace=function(){if(PAGE_TYPE&&PAGE_TYPE==ADV_IFRAME_PAGE_TYPE)return!1;var a="",b={pagetype:PAGE_TYPE};try{a=util.toKVString(b);var c=sdk.generateSendData("action=webpageview&"+a);sdk.stat(c)}catch(e){sdk.errorReport("webpageview",e.message)}},Apwebstat.webCommonEvent=function(a){var b=void 0==a.category?"":a.category,c=void 0==a.action?"":a.action,d=void 0==a.label?"":a.label,f=void 0==a.cookieid?"0":a.cookieid,g=void 0==a.data?"":a.data;g=util.stringify(g);var h={category:b,act:c,label:d,content:g,xcookieid:f};try{var i=util.toKVString(h),g=sdk.generateSendData("action=webcommonevent&"+i);sdk.stat(g)}catch(e){sdk.errorReport("webCommonEvent",e.message)}};var defaultPositionId="0";Apwebstat.advTrack=function(a){var b=a.advId,c=a.zid,d=a.loadComplete;void 0!=b&&0!=b.length||(b=""),void 0!=d&&0!=d.length||(d=0),void 0!=c&&0!=c.length||(c=defaultPositionId);var f={atiid:b,zid:c,pagetype:PAGE_TYPE,loadfinished:d};try{var g=util.toKVString(f),h=sdk.generateSendData("action=webatiview&"+g);sdk.stat(h)}catch(e){sdk.errorReport("advTrack",e.message)}},Apwebstat.advClick=function(a){var b=a.advId,c=a.zid,d=a.loadComplete;void 0!=b&&0!=b.length||(b=""),void 0!=d&&0!=d.length||(d=0),void 0!=c&&0!=c.length||(c=defaultPositionId);var f={atiid:b,zid:c,loadfinished:d};try{var g=util.toKVString(f),h=sdk.generateSendData("action=webaticlick&"+g);sdk.stat(h)}catch(e){sdk.errorReport("advClick",e.message)}},Apwebstat.zhongjianyeclick=function(a){var b=a.buttonType,c=a.time;void 0!=b&&0!=b.length||(b="back"),void 0!=c&&0!=c||(c=(new Date).getTime());var d=(new Date).getTime()-c,f={buttontype:b,viewpagetime:d};try{var g=util.toKVString(f),h=sdk.generateSendData("action=webzhongjianyeclick&"+g);sdk.stat(h)}catch(e){sdk.errorReport("zhongjianyeclick",e.message)}},Apwebstat.redirect=function(a){var b=a.url,c=a.openInNewWindow;void 0!=b&&0!=b.length||(b=""),void 0==c&&(c=1);var d={redirectUrl:b};try{var f=util.toKVString(d),g=sdk.generateSendData("action=webredirect&"+f);sdk.redirectStat(redirectDomainUrl,g,b,c)}catch(e){sdk.errorReport("webredirect",e.message)}};var playId=(new Date).getTime();Apwebstat.videoplayduration=function(a){var b=a.duration,c=a.src,d=a.srccheck,f=a.playerlocation;void 0!=b&&0!=b.length||(b=0),void 0!=c&&0!=c.length||(c=0),void 0!=d&&0!=d.length||(d=0),void 0!=f&&0!=f.length||(f=0);var g={duration:b,playid:playId,src:c,playerlocation:f,srccheck:d};try{var h=util.toKVString(g),i=sdk.generateSendData("action=webvideoplayduration&"+h);sdk.stat(i)}catch(e){sdk.errorReport("webvideoplayduration",e.message)}},Apwebstat.videoplaydurationWithRefferPath=function(a){var b=a.refferPath;void 0!=b&&0!=b.length||void 0!=(b=document.referrer)&&0!=b.length||(b="0");var c=a.duration,d=a.src,f=a.srccheck,g=a.playerlocation;void 0!=c&&0!=c.length||(c=0),void 0!=d&&0!=d.length||(d=0),void 0!=f&&0!=f.length||(f=0),void 0!=g&&0!=g.length||(g=0);var h={duration:c,playid:playId,src:d,playerlocation:g,srccheck:f,refferPath:b};try{var i=util.toKVString(h),j=sdk.generateSendData("action=webvideoplayduration&"+i);sdk.stat(j)}catch(e){sdk.errorReport("webvideoplayduration",e.message)}},Apwebstat.lamianvideoplayduration=function(a){var b=a.uid,c=a.videoduration,d=a.playduration,f=a.percent,g=a.xcookieid;void 0!=b&&0!=b.length||(b=0),void 0!=c&&0!=c.length||(c=0),void 0!=d&&0!=d.length||(d=20),void 0!=f&&0!=f.length||(f=0),void 0!=g&&0!=g.length||(g=0);var h={playid:playId,uid:b,videoduration:c,playduration:d,percent:f,xcookieid:g};try{var i=util.toKVString(h),j=sdk.generateSendData("action=weblamianvideoplayduration&"+i);sdk.stat(j)}catch(e){sdk.errorReport("weblamianvideoplayduration",e.message)}},Apwebstat.atmJumpUrl=function(a){var b=a.clickUrl,c=a.buttonId,d=a.advId,e=a.zid;if(void 0!=b&&0!=b.length&&void 0!=c&&0!=c.length){0==bid&&(bid="0");var f={advid:d,zid:e,cookieId:cookieId,bid:bid};f=util.stringify(f);var g=util.encode(b);f=util.encode(f);var h="//"+logHost+"/r.gif?eid=guanggao_dianji&rd="+f+"&redirecturl="+g+"&clitime="+(new Date).getTime();document.getElementById(c).setAttribute("href",h)}},Apwebstat.pageDuration=function(){if(PAGE_TYPE&&PAGE_TYPE==ADV_IFRAME_PAGE_TYPE)return!1;var a=playId,b=2e4,c=0,d=function(b){var c={duration:b,viewid:a};try{var d=util.toKVString(c),f=sdk.generateSendData("action=webpageduration&"+d);sdk.stat(f)}catch(e){sdk.errorReport("webpageduration",e.message)}};d(0);setInterval(function(){c++,d(c*b/1e3)},b)},Apwebstat.webPageViewTraces=function(a){var b="",c={pagetype:PAGE_TYPE};try{b=util.toKVString(c);var d=sdk.generateSendData("action=webpageviews&"+b);sdk.stat(d)}catch(e){sdk.errorReport("webpageviews",e.message)}},Apwebstat.getRedictURL=function(a,b){var c=a&&a.data?a.data:"",d=""==c?"-":c.label,e=""==c?"0":c.cookieid,f=""==c?"0":c.data;f=void 0===f?"0":f;var g={btn:d,videoid:f};e=util.encode(e),g=util.stringify(g),g=util.encode(g);var h=util.encode(b);return"//"+logHost+"/r.gif?eid=imyxh5w&xcookieid="+e+"&rd="+g+"&redirecturl="+h+"&clitime="+(new Date).getTime()},Apwebstat.videoShare=function(a){var b=a.videoId,c=a.plat,d=a.bid;void 0!=b&&0!=b.length||(b=""),void 0!=c&&0!=c.length||(c=0),void 0!=d&&0!=d.length||(d=0);var f={videoid:b,plat:c,bid:d};try{var g=util.toKVString(f),h=sdk.generateSendData("action=webvideoshare&"+g);sdk.stat(h)}catch(e){sdk.errorReport("videoShare",e.message)}},Apwebstat.zhibolog=function(a){var b=a.zhiboid,c=a.bid;void 0!=b&&0!=b.length||(b="0"),void 0!=c&&0!=c.length||(c="0");var d={zhiboid:b,bid:c};try{var f=util.toKVString(d),g=sdk.generateSendData("action=webzhibolog&"+f);sdk.stat(g)}catch(e){sdk.errorReport("webzhibolog",e.message)}},Apwebstat.getVideoShareRedictURL=function(a,b){var c=a&&""!=a?a.videoId:"-",d=a&&""!=a?a.plat:"-",e=a&&""!=a?a.bid:"-";void 0!=c&&0!=c.length||(c=""),void 0!=d&&0!=d.length||(d=0),void 0!=e&&0!=e.length||(e=0);var f={videoid:c,plat:d,bid:e};f=util.stringify(f),f=util.encode(f);var g=util.encode(b);return"//"+logHost+"/r.gif?eid=videoshare&rd="+f+"&redirecturl="+g+"&clitime="+(new Date).getTime()},Apwebstat.getLamianRedirectURL=function(a,b){a&&void 0!=a||(a="");var c="0",d=a;"object"==typeof a&&a.action&&(d=util.stringify(a),c=a.cookieid),d=d.replace(/\n/g,"!"),d=util.encode(d);var c=util.encode(c),e=util.encode(b);return"//"+logHost+"/r.gif?eid=lamian_report&xcookieid="+c+"&rd="+d+"&redirecturl="+e+"&clitime="+(new Date).getTime()},Apwebstat.atiPageView=function(a){var b=a&&""!=a?a.zid:"",c=a&&""!=a?a.atiid:"";void 0!=b&&0!=b.length||(b=0),void 0!=c&&0!=c.length||(c=0);var d={zid:b,atiid:c};try{var f=util.toKVString(d),g=sdk.generateSendData("action=webatiipageview&"+f);sdk.stat(g)}catch(e){sdk.errorReport("webAtiiPageView",e.message)}},Apwebstat.reportApm=function(a){if(!a||""==a)return!1;var b=document.referrer;b&&""!=b||(b="0");var c=window.location.href;c&&""!=c||(c="0");var d=navigator.userAgent,d=window.location.href;d&&""!=d||(d="0"),a.req_referrer=b,a.req_url=c,a.req_ua=d;var f=util.stringify(a),g="0ca215fe53634a20b380bf8f96028ace",h=(new Date).getTime(),i=util.generateUUID()+h,j={phone:"0",ostype:"web",vendor:"0",osver:"0",networktype:"0",metric:"web.http",machineid:"0",appver:"0",value:0,channel:"aipai",tags:f},k="action=mbapm&appkey="+g+"&logid="+i+"&guid="+i+"&clitime="+h+"&v=1";try{var l=util.toKVString(j),m=k+"&"+l;sdk.send(domainUrl,m,"post")}catch(e){sdk.errorReport("mbapm",e.message)}},Apwebstat.atiClick=function(a){var b=a&&""!=a?a.zid:"",c=a&&""!=a?a.atiid:"";void 0!=b&&0!=b.length||(b=0),void 0!=c&&0!=c.length||(c=0);var d={zid:b,atiid:c};try{var f=util.toKVString(d),g=sdk.generateSendData("action=webatiiclick&"+f);sdk.stat(g)}catch(e){sdk.errorReport("webAtiiClick",e.message)}},Apwebstat.loadBaiduSDK=function(){if(PAGE_TYPE&&-1!=PAGE_TYPE.indexOf("mlog_"))return!1;var a=document.createElement("script"),b="file:"===location.protocol?"http:":"";a.src=b+"//hm.baidu.com/hm.js?d845438b95d33b4fa5758cf0c55f3cae";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)},Apwebstat.loadBingoSDK=function(a,b,c){if(PAGE_TYPE&&PAGE_TYPE==ADV_IFRAME_PAGE_TYPE)return!1;var d=document.getElementsByTagName("head")[0],e=null;null==document.getElementById(a)?(e=document.createElement("script"),e.setAttribute("type","text/javascript"),e.setAttribute("src",b),e.setAttribute("id",a),null!=c&&(e.onload=e.onreadystatechange=function(){if(e.ready)return!1;e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(e.ready=!0,c())}),d.appendChild(e)):null!=c&&c()},Apwebstat.sendPVEventByBingoSDK=function(){window.aplan.load("54e9d875ae82ca4c32aa5b2ab60bbf5dd522");var a={};a.pagetype=PAGE_TYPE,a.url=location.href,aplan.track("pageView",a,"","sys")},init();var methods={advClick:Apwebstat.advClick,advTrack:Apwebstat.advTrack,atiClick:Apwebstat.atiClick,atiPageView:Apwebstat.atiPageView,zhongjianyeclick:Apwebstat.zhongjianyeclick,webCommonEvent:Apwebstat.webCommonEvent,videoplayduration:Apwebstat.videoplayduration,videoplaydurationWithRefferPath:Apwebstat.videoplaydurationWithRefferPath,atmJumpUrl:Apwebstat.atmJumpUrl,webPageViewTraces:Apwebstat.webPageViewTraces,videoShare:Apwebstat.videoShare,zhibolog:Apwebstat.zhibolog,reportApm:Apwebstat.reportApm};window.ap_mlog_track=function(a){var b=a.actionType,c=(a.data,methods[b]);void 0!=c&&c(a.data)},window.ap_redict_url=function(a,b){return Apwebstat.getRedictURL(a,b)},window.ap_videoshare_redict_url=function(a,b){return Apwebstat.getVideoShareRedictURL(a,b)},window.ap_lamian_redict_url=function(a,b){return Apwebstat.getLamianRedirectURL(a,b)},window.ap_lamian_videoplayduration=function(a){return Apwebstat.lamianvideoplayduration(a)},window.ap_change_host=function(a){logHost=a,apdomain=prefix_domain+"//"+logHost,apip="//219.135.99.167",webGif="/g.gif",appGif="/i.gif",redirectGif="/r.gif",domainUrl=apdomain+webGif,appdomainUrl=apdomain+appGif,ipUrl=apip+webGif,redirectDomainUrl=apdomain+redirectGif,redirectIpUrl=apip+redirectGif,errorReportUrl="//"+logHost+"/e.gif"}}(),function(){var logHost="mlog.aipai.com",localHost=window.location.host;if(localHost){var hostIndex=localHost.indexOf("lieyou.com");hostIndex>=0&&(logHost="mlog.lieyou.com")}var URL="http://"+logHost+"/a.gif",PLATFORM="web",PREFIX="aplan_",APPKEY="54e9d875ae82ca4c32aa5b2ab60bbf5dd522",SDKVERSION="1.0.1",APPVERION="1.0.0",MAX_KEY_LENGTH=50,MAX_CONTENT_LENGTH=500,EVENT_ATTRBUTES_COUNT=20,IDENTIFY_ATTRIBUTES_COUNT=100,util={},sdk={};!function(global){var JSON=JSON||{};JSON.stringify=JSON.stringify||function(a){var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a='"'+a+'"'),String(a);var c,d,e=[],f=a&&a.constructor==Array;for(c in a)d=a[c],b=typeof d,"string"==b?d='"'+d+'"':"object"==b&&null!==d&&(d=JSON.stringify(d)),e.push((f?"":'"'+c+'":')+String(d));return(f?"[":"{")+String(e)+(f?"]":"}")},JSON.parse=JSON.parse||function(str){return""===str&&(str='""'),eval("var p="+str+";"),p},global.JSON=JSON}(util),function(a){"use strict";var b,c=a.Base64,d="2.2.0";if("undefined"!=typeof module&&module.exports)try{b=require("buffer").Buffer}catch(y){}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=function(a){for(var b={},c=0,d=a.length;c<d;c++)b[a.charAt(c)]=c;return b}(e),g=String.fromCharCode,h=function(a){if(a.length<2){var b=a.charCodeAt(0);return b<128?a:b<2048?g(192|b>>>6)+g(128|63&b):g(224|b>>>12&15)+g(128|b>>>6&63)+g(128|63&b)}var b=65536+1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320);return g(240|b>>>18&7)+g(128|b>>>12&63)+g(128|b>>>6&63)+g(128|63&b)},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,j=function(a){return a.replace(i,h)},k=function(a){var b=[0,2,1][a.length%3],c=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0);return[e.charAt(c>>>18),e.charAt(c>>>12&63),b>=2?"=":e.charAt(c>>>6&63),b>=1?"=":e.charAt(63&c)].join("")},l=a.btoa?function(b){return a.btoa(b)}:function(a){return a.replace(/[\s\S]{1,3}/g,k)},m=b?function(a){return(a.constructor===b.constructor?a:new b(a)).toString("base64")}:function(a){return l(j(a))},n=function(a,b){return b?m(String(a)).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}).replace(/=/g,""):m(String(a))},o=function(a){return n(a,!0)},p=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),q=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),c=b-65536;return g(55296+(c>>>10))+g(56320+(1023&c));case 3:return g((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return g((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},r=function(a){return a.replace(p,q)},s=function(a){var b=a.length,c=b%4,d=(b>0?f[a.charAt(0)]<<18:0)|(b>1?f[a.charAt(1)]<<12:0)|(b>2?f[a.charAt(2)]<<6:0)|(b>3?f[a.charAt(3)]:0),e=[g(d>>>16),g(d>>>8&255),g(255&d)];return e.length-=[0,0,2,1][c],e.join("")},t=a.atob?function(b){return a.atob(b)}:function(a){return a.replace(/[\s\S]{1,4}/g,s)},u=b?function(a){return(a.constructor===b.constructor?a:new b(a,"base64")).toString()}:function(a){return r(t(a))},v=function(a){return u(String(a).replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(){var b=a.Base64;return a.Base64=c,b};if(a.Base64={VERSION:d,atob:t,btoa:l,fromBase64:v,toBase64:n,utob:j,encode:n,encodeURI:o,btou:r,decode:v,noConflict:w},"function"==typeof Object.defineProperty){var x=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return v(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(a){return n(this,a)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return n(this,!0)}))}}a.Meteor&&(Base64=a.Base64)}(util),String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.replaceAll=function(a,b){return this.split(a).join(b)},util.encode=function(a){return util.Base64.encodeURI(a)},util.stringify=function(a){return util.JSON.stringify(a)},util.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)})},util.getCookie=function(a){var b=void 0;if(document.cookie&&""!=document.cookie)for(var c=document.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].trim();if(e.substring(0,a.length+1)==a+"="){b=decodeURIComponent(e.substring(a.length+1));break}}return b},util.setCookie=function(a,b,c,d){var e=new Date;e.setTime(e.getTime()),c&&(c=1e3*c*60*60*24);var f=new Date(e.getTime()+c);document.cookie=a+"="+escape(b)+(c?";expires="+f.toGMTString():"")+(d?";path="+d:"")},util.setSessionCookie=function(a,b,c){document.cookie=a+"="+escape(b)+(c?";path="+c:"")},util.isEmpty=function(a){return!a||""==a},sdk.send=function(a,b,c){if(b&&"object"==typeof b){var d=util.stringify(b),e=util.encode(d),a=a+"?"+e;try{var f=new Image(1,1);f.src=a,f.onload=function(){c&&""!=c&&(location.href=c)},f.onerror=function(){c&&""!=c&&(location.href=c)}}catch(g){c&&""!=c&&(location.href=c)}}};var getUid=function(){if(util.isEmpty(APPKEY))return"";var a=APPKEY+"_uid",b=util.getCookie(a);if(util.isEmpty(b)){var c=(new Date).getTime();b=util.generateUUID()+c}return util.setCookie(a,b,3650,"/"),b},exports={},getHdr=function(){var a=getUid();if(!a||""==a)return!1;var b=PLATFORM,c=APPKEY,d=APPKEY,e=SDKVERSION,f=APPVERION,g={};return g[PREFIX+"plat"]=b,g[PREFIX+"ak"]=c,g[PREFIX+"ch"]=d,g[PREFIX+"uid"]=a,g[PREFIX+"sdkv"]=e,g[PREFIX+"appver"]=f,g},getSessionId=function(){var a=APPKEY+"_sid";return util.getCookie(a)},setSessionId=function(){var a=APPKEY+"_sid",b=(new Date).getTime(),c=util.generateUUID(),d=c+b;return util.setSessionCookie(a,d,"/"),d};exports.load=function(a,b){APPKEY=a,b&&(logHost=exports.changeHost(b))},exports.track=function(a,b,c,d){if(APPKEY&&""!=APPKEY&&a&&""!=a&&(d&&""!=d||(d="cus"),a=a.replaceAll(" ",""),b&&"object"==typeof b)){var e="0",f=getSessionId();util.isEmpty(f)&&(f=setSessionId(),e="1");var g=getHdr();if(g){var h=0;for(var i in b){if(!i||""==i||i.toString().length>MAX_KEY_LENGTH)return;var j=b[i];"number"==typeof j||"boolean"==typeof j?b[i]=j:j&&""!=j||(b[i]=" "),j&&j.toString().length>MAX_CONTENT_LENGTH&&(b[i]=j.toString().substring(0,MAX_CONTENT_LENGTH)),g[i]=b[i],h++}h>EVENT_ATTRBUTES_COUNT||(g[PREFIX+"et"]=d,g[PREFIX+"ts"]=(new Date).getTime(),g[PREFIX+"eid"]=a,g[PREFIX+"sid"]=f,g[PREFIX+"fa"]=e,sdk.send(URL,g,c))}}},exports.identify=function(a,b,c){if(APPKEY&&""!=APPKEY&&a&&""!=a&&!(a.length>MAX_CONTENT_LENGTH)&&(a=a.replaceAll(" ",""),b&&"object"==typeof b)){var d="0",e=getSessionId();util.isEmpty(e)&&(e=setSessionId(),d="1");var f=getHdr(),g=0;for(var h in b){if(!h||""==h||h.toString().length>MAX_KEY_LENGTH)return;var i=b[h];"number"==typeof i||"boolean"==typeof i?b[h]=i:i&&""!=i||(b[h]=" "),i&&i.toString().length>MAX_CONTENT_LENGTH&&(b[h]=i.toString().substring(0,MAX_CONTENT_LENGTH)),f[h]=b[h],g++}g>IDENTIFY_ATTRIBUTES_COUNT||(f[PREFIX+"et"]="idf",f[PREFIX+"ts"]=(new Date).getTime(),f[PREFIX+"userid"]=a,f[PREFIX+"sid"]=e,f[PREFIX+"fa"]=d,sdk.send(URL,f,c))}},exports.changeHost=function(a){logHost=a,URL="http://"+logHost+"/a.gif"},window.aplan=exports}();